<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>package_private</access>
        <active>true</active>
        <api_name>x_1509365_mktest.TestCEBConnection</api_name>
        <caller_access/>
        <client_callable>true</client_callable>
        <description/>
        <name>TestCEBConnection</name>
        <script><![CDATA[var TestCEBConnection = Class.create();
TestCEBConnection.prototype = Object.extendsObject(global.AbstractAjaxProcessor, {

    type: 'TestCEBConnection',
	testCarboniteConnection: function () {
		var apiEndpoint = this.getParameter("sysparam_apiendpoint");
		var callerEmail = this.getParameter("sysparam_email");
		var apiKey = this.getParameter("sysparam_apikey");
		var r = new sn_ws.RESTMessageV2();
		r.setEndpoint(apiEndpoint+"tokens/apikey");
		r.setHttpMethod("POST");
		r.setRequestHeader("Content","application/json");
		r.setRequestHeader("Content-Type","application/json");
		r.setRequestBody('{"Email": "'+callerEmail+'","APIKeySecret": "'+apiKey+'", "TokenReason": "APICall"}');
		
		var response = r.execute();
		var responseBody = JSON.parse(response.getBody());
		var results = {"Success": (response.getStatusCode() == 201 && responseBody.access_token != '')};
		return JSON.stringify(results);
    }
});

]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-09-19 18:28:22</sys_created_on>
        <sys_id>4cc82c388370d21067c3bfc6feaad3d5</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>TestCEBConnection</sys_name>
        <sys_package display_value="MKTest" source="x_1509365_mktest">4f166eb683ff421067c3bfc6feaad3df</sys_package>
        <sys_policy/>
        <sys_scope display_value="MKTest">4f166eb683ff421067c3bfc6feaad3df</sys_scope>
        <sys_update_name>sys_script_include_4cc82c388370d21067c3bfc6feaad3d5</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-09-19 18:28:22</sys_updated_on>
    </sys_script_include>
</record_update>
